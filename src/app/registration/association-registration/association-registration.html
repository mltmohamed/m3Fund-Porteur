<div class="registration-page">
  <div class="registration-container">
    <!-- Titre de la page -->
    <div class="title-section">
      <h1 class="main-title">Inscription</h1>
      <p class="subtitle">Créer un compte pour commencer</p>
    </div>

    <!-- Messages d'erreur et de succès -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <!-- Formulaire -->
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">
      <div class="form-columns">
        <!-- Colonne gauche -->
        <div class="form-column left-column">
          <div class="form-group">
            <label for="nom-association">Nom de l'association</label>
            <input 
              type="text" 
              id="nom-association" 
              formControlName="associationName" 
              class="form-input"
              [class.error]="associationName?.invalid && associationName?.touched">
            <div *ngIf="associationName?.invalid && associationName?.touched" class="error-text">
              <span *ngIf="associationName?.errors?.['required']">Le nom de l'association est requis</span>
              <span *ngIf="associationName?.errors?.['minlength']">Le nom doit contenir au moins 2 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="telephone">Numéro de téléphone</label>
            <input 
              type="tel" 
              id="telephone" 
              formControlName="phone" 
              class="form-input"
              [class.error]="phone?.invalid && phone?.touched">
            <div *ngIf="phone?.invalid && phone?.touched" class="error-text">
              <span *ngIf="phone?.errors?.['required']">Le numéro de téléphone est requis</span>
              <span *ngIf="phone?.errors?.['pattern']">Format de téléphone invalide</span>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-input"
              [class.error]="email?.invalid && email?.touched">
            <div *ngIf="email?.invalid && email?.touched" class="error-text">
              <span *ngIf="email?.errors?.['required']">L'email est requis</span>
              <span *ngIf="email?.errors?.['email']">Format d'email invalide</span>
            </div>
          </div>

          <div class="form-group">
            <label for="adresse">Adresse</label>
            <input 
              type="text" 
              id="adresse" 
              formControlName="address" 
              class="form-input"
              [class.error]="address?.invalid && address?.touched">
            <div *ngIf="address?.invalid && address?.touched" class="error-text">
              <span *ngIf="address?.errors?.['required']">L'adresse est requise</span>
              <span *ngIf="address?.errors?.['minlength']">L'adresse doit contenir au moins 5 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="revenu-annuel">Revenu annuel (FCFA)</label>
            <input 
              type="number" 
              id="revenu-annuel" 
              formControlName="annualIncome" 
              class="form-input"
              [class.error]="annualIncome?.invalid && annualIncome?.touched"
              min="0"
              step="0.01">
            <div *ngIf="annualIncome?.invalid && annualIncome?.touched" class="error-text">
              <span *ngIf="annualIncome?.errors?.['required']">Le revenu annuel est requis</span>
              <span *ngIf="annualIncome?.errors?.['min']">Le revenu annuel doit être supérieur à 0</span>
            </div>
          </div>

          <div class="form-group">
            <label for="capital-social">Capital social (FCFA)</label>
            <input 
              type="number" 
              id="capital-social" 
              formControlName="shareCapital" 
              class="form-input"
              [class.error]="shareCapital?.invalid && shareCapital?.touched"
              min="0"
              step="0.01">
            <div *ngIf="shareCapital?.invalid && shareCapital?.touched" class="error-text">
              <span *ngIf="shareCapital?.errors?.['required']">Le capital social est requis</span>
              <span *ngIf="shareCapital?.errors?.['min']">Le capital social doit être supérieur à 0</span>
            </div>
          </div>

          <div class="form-group">
            <label for="statut-association">Statut de l'association</label>
            <div class="file-input-container">
              <input 
                type="file" 
                id="statut-association" 
                (change)="onFileSelected($event, 'associationStatus')" 
                accept=".pdf,.jpg,.jpeg,.png"
                class="file-input-hidden">
              <div class="file-input-display">
                <span class="file-input-text">{{ associationStatusFileName || 'Sélectionner un fichier' }}</span>
                <button type="button" class="file-upload-btn" (click)="triggerFileInput('statut-association')">
                  <i class="fas fa-upload"></i>
                </button>
              </div>
            </div>
            <div *ngIf="associationStatus?.invalid && associationStatus?.touched" class="error-text">
              <span *ngIf="associationStatus?.errors?.['required']">Le statut de l'association est requis</span>
            </div>
          </div>
        </div>

        <!-- Colonne droite -->
        <div class="form-column right-column">
          <div class="form-group">
            <label for="releve-bancaire">Relevé bancaire</label>
            <div class="file-input-container">
              <input 
                type="file" 
                id="releve-bancaire" 
                (change)="onFileSelected($event, 'bankStatement')" 
                accept=".pdf,.jpg,.jpeg,.png"
                class="file-input-hidden">
              <div class="file-input-display">
                <span class="file-input-text">{{ bankStatementFileName || 'Sélectionner un fichier' }}</span>
                <button type="button" class="file-upload-btn" (click)="triggerFileInput('releve-bancaire')">
                  <i class="fas fa-upload"></i>
                </button>
              </div>
            </div>
            <small class="optional-text">(facultatif)</small>
          </div>

          <div class="form-group">
            <label for="password">Créer un mot de passe</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              class="form-input"
              [class.error]="password?.invalid && password?.touched">
            <div *ngIf="password?.invalid && password?.touched" class="error-text">
              <span *ngIf="password?.errors?.['required']">Le mot de passe est requis</span>
              <span *ngIf="password?.errors?.['minlength']">Le mot de passe doit contenir au moins 8 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="confirm-password">Confirmer le mot de passe</label>
            <input 
              type="password" 
              id="confirm-password" 
              formControlName="confirmPassword" 
              class="form-input"
              [class.error]="confirmPassword?.invalid && confirmPassword?.touched">
            <div *ngIf="confirmPassword?.invalid && confirmPassword?.touched" class="error-text">
              <span *ngIf="confirmPassword?.errors?.['required']">La confirmation du mot de passe est requise</span>
              <span *ngIf="confirmPassword?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
            </div>
          </div>

          <div class="form-group">
            <label for="photo-profil">Choisissez une photo de profil</label>
            <div class="profile-photo-container">
              <div class="profile-photo">
                <img 
                  [src]="profilePhotoPreview || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiByeD0iNTAiIGZpbGw9IiNmM2Y0ZjYiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjAgMjF2LTJhNCA0IDAgMCAwLTQtNEg4YTQgNCAwIDAgMC00IDR2MiIgc3Ryb2tlPSIjOTk5IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjwvc3ZnPgo8L3N2Zz4K'" 
                  alt="Photo de profil" 
                  class="profile-image">
                <input 
                  type="file" 
                  id="photo-profil" 
                  (change)="onFileSelected($event, 'profilePhoto')" 
                  accept="image/*"
                  class="file-input-hidden">
                <button 
                  type="button" 
                  class="camera-btn"
                  (click)="triggerFileInput('photo-profil')">
                  <i class="fas fa-camera"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="button" class="back-btn" (click)="goBack()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M12 19L5 12L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button 
          type="submit" 
          class="submit-btn" 
          [disabled]="isLoading || registrationForm.invalid">
          <span *ngIf="!isLoading">S'enregistrer</span>
          <span *ngIf="isLoading">Inscription en cours...</span>
        </button>
      </div>
    </form>
  </div>
</div>