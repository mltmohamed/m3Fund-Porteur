<div class="registration-page">
  <div class="registration-container">
    <!-- Titre de la page -->
    <div class="title-section">
      <h1 class="main-title">Inscription</h1>
      <p class="subtitle">Créer un compte pour commencer</p>
    </div>

    <!-- Messages d'erreur et de succès -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>
  
      <!-- Formulaire -->
      <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">
        <div class="form-columns">
          <!-- Colonne gauche -->
          <div class="form-column left-column">
            <div class="form-group">
              <label for="nom">Nom</label>
              <input 
                type="text" 
                id="nom" 
                formControlName="lastName" 
                class="form-input"
                [class.error]="lastName?.invalid && lastName?.touched">
              <div *ngIf="lastName?.invalid && lastName?.touched" class="error-text">
                <span *ngIf="lastName?.errors?.['required']">Le nom est requis</span>
                <span *ngIf="lastName?.errors?.['minlength']">Le nom doit contenir au moins 2 caractères</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="prenom">Prénom</label>
              <input 
                type="text" 
                id="prenom" 
                formControlName="firstName" 
                class="form-input"
                [class.error]="firstName?.invalid && firstName?.touched">
              <div *ngIf="firstName?.invalid && firstName?.touched" class="error-text">
                <span *ngIf="firstName?.errors?.['required']">Le prénom est requis</span>
                <span *ngIf="firstName?.errors?.['minlength']">Le prénom doit contenir au moins 2 caractères</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="telephone">Numéro de téléphone</label>
              <input 
                type="tel" 
                id="telephone" 
                formControlName="phone" 
                class="form-input"
                [class.error]="phone?.invalid && phone?.touched">
              <div *ngIf="phone?.invalid && phone?.touched" class="error-text">
                <span *ngIf="phone?.errors?.['required']">Le numéro de téléphone est requis</span>
                <span *ngIf="phone?.errors?.['pattern']">Format de téléphone invalide</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="email">Email</label>
              <input 
                type="email" 
                id="email" 
                formControlName="email" 
                class="form-input"
                [class.error]="email?.invalid && email?.touched">
              <div *ngIf="email?.invalid && email?.touched" class="error-text">
                <span *ngIf="email?.errors?.['required']">L'email est requis</span>
                <span *ngIf="email?.errors?.['email']">Format d'email invalide</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="adresse">Adresse</label>
              <input 
                type="text" 
                id="adresse" 
                formControlName="address" 
                class="form-input"
                [class.error]="address?.invalid && address?.touched">
              <div *ngIf="address?.invalid && address?.touched" class="error-text">
                <span *ngIf="address?.errors?.['required']">L'adresse est requise</span>
                <span *ngIf="address?.errors?.['minlength']">L'adresse doit contenir au moins 5 caractères</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="carte-biometrique">Carte Biométrique</label>
              <div class="file-input-container">
                <input 
                  type="file" 
                  id="carte-biometrique" 
                  (change)="onFileSelected($event, 'biometricCard')" 
                  accept=".pdf,.jpg,.jpeg,.png"
                  class="form-input">
                <button type="button" class="upload-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
              </div>
            </div>
  
            <div class="form-group">
              <label for="certificat-residence">Certificat de residence</label>
              <div class="file-input-container">
                <input 
                  type="file" 
                  id="certificat-residence" 
                  (change)="onFileSelected($event, 'residenceCertificate')" 
                  accept=".pdf,.jpg,.jpeg,.png"
                  class="form-input">
                <button type="button" class="upload-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
  
          <!-- Colonne droite -->
          <div class="form-column right-column">
            <div class="form-group">
              <label for="revenu-annuel">Revenu annuel</label>
              <input 
                type="number" 
                id="revenu-annuel" 
                formControlName="annualIncome" 
                class="form-input"
                [class.error]="annualIncome?.invalid && annualIncome?.touched">
              <div *ngIf="annualIncome?.invalid && annualIncome?.touched" class="error-text">
                <span *ngIf="annualIncome?.errors?.['required']">Le revenu annuel est requis</span>
                <span *ngIf="annualIncome?.errors?.['min']">Le revenu doit être positif</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="releve-bancaire">Relevé bancaire</label>
              <div class="file-input-container">
                <input 
                  type="file" 
                  id="releve-bancaire" 
                  (change)="onFileSelected($event, 'bankStatement')" 
                  accept=".pdf,.jpg,.jpeg,.png"
                  class="form-input">
                <button type="button" class="upload-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                  </svg>
                </button>
              </div>
              <small class="optional-text">(facultatif)</small>
            </div>
  
            <div class="form-group">
              <label for="password">Créer un mot de passe</label>
              <input 
                type="password" 
                id="password" 
                formControlName="password" 
                class="form-input"
                [class.error]="password?.invalid && password?.touched">
              <div *ngIf="password?.invalid && password?.touched" class="error-text">
                <span *ngIf="password?.errors?.['required']">Le mot de passe est requis</span>
                <span *ngIf="password?.errors?.['minlength']">Le mot de passe doit contenir au moins 8 caractères</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="confirm-password">Confirmer le mot de passe</label>
              <input 
                type="password" 
                id="confirm-password" 
                formControlName="confirmPassword" 
                class="form-input"
                [class.error]="confirmPassword?.invalid && confirmPassword?.touched">
              <div *ngIf="confirmPassword?.invalid && confirmPassword?.touched" class="error-text">
                <span *ngIf="confirmPassword?.errors?.['required']">La confirmation du mot de passe est requise</span>
                <span *ngIf="confirmPassword?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
              </div>
            </div>
  
            <div class="form-group">
              <label for="photo-profil">Choisissez une photo de profil</label>
              <div class="profile-photo-container">
                <div class="profile-photo">
                  <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiByeD0iNTAiIGZpbGw9IiNmM2Y0ZjYiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjAgMjF2LTJhNCA0IDAgMCAwLTQtNEg4YTQgNCAwIDAgMC00IDR2MiIgc3Ryb2tlPSIjOTk5IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIHN0cm9rZT0iIzk5OSIgc3Ryb2tlLXdpZHRoPSIyIi8+Cjwvc3ZnPgo8L3N2Zz4K" alt="Photo de profil" class="profile-image">
                  <input 
                    type="file" 
                    id="photo-profil" 
                    (change)="onFileSelected($event, 'profilePhoto')" 
                    accept="image/*"
                    style="display: none;">
                  <button 
                    type="button" 
                    class="camera-btn"
                    (click)="triggerFileInput()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 4H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <circle cx="12" cy="13" r="3" stroke="white" stroke-width="2"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <!-- Boutons d'action -->
        <div class="form-actions">
          <button type="button" class="back-btn" (click)="goBack()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 12H5M12 19L5 12L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button 
            type="submit" 
            class="submit-btn" 
            [disabled]="isLoading || registrationForm.invalid">
            <span *ngIf="!isLoading">S'enregistrer</span>
            <span *ngIf="isLoading">Inscription en cours...</span>
          </button>
        </div>
      </form>
    </div>
  