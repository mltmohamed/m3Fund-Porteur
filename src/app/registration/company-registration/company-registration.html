<div class="registration-page">
  <div class="registration-container">
    <!-- Titre de la page -->
    <div class="title-section">
      <h1 class="main-title">Inscription</h1>
      <p class="subtitle">Créer un compte pour commencer</p>
    </div>

    <!-- Messages d'erreur et de succès -->
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <!-- Formulaire -->
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form">
      <div class="form-columns">
        <!-- Colonne gauche -->
        <div class="form-column left-column">
          <div class="form-group">
            <label for="nom-entite">Nom de l'entité</label>
            <input 
              type="text" 
              id="nom-entite" 
              formControlName="companyName" 
              class="form-input"
              [class.error]="companyName?.invalid && companyName?.touched">
            <div *ngIf="companyName?.invalid && companyName?.touched" class="error-text">
              <span *ngIf="companyName?.errors?.['required']">Le nom de l'entité est requis</span>
              <span *ngIf="companyName?.errors?.['minlength']">Le nom doit contenir au moins 2 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="telephone">Numéro de téléphone</label>
            <input 
              type="tel" 
              id="telephone" 
              formControlName="phone" 
              class="form-input"
              [class.error]="phone?.invalid && phone?.touched">
            <div *ngIf="phone?.invalid && phone?.touched" class="error-text">
              <span *ngIf="phone?.errors?.['required']">Le numéro de téléphone est requis</span>
              <span *ngIf="phone?.errors?.['pattern']">Format de téléphone invalide</span>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-input"
              [class.error]="email?.invalid && email?.touched">
            <div *ngIf="email?.invalid && email?.touched" class="error-text">
              <span *ngIf="email?.errors?.['required']">L'email est requis</span>
              <span *ngIf="email?.errors?.['email']">Format d'email invalide</span>
            </div>
          </div>

          <div class="form-group">
            <label for="adresse">Adresse</label>
            <input 
              type="text" 
              id="adresse" 
              formControlName="address" 
              class="form-input"
              [class.error]="address?.invalid && address?.touched">
            <div *ngIf="address?.invalid && address?.touched" class="error-text">
              <span *ngIf="address?.errors?.['required']">L'adresse est requise</span>
              <span *ngIf="address?.errors?.['minlength']">L'adresse doit contenir au moins 5 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="rccm">RCCM</label>
            <div class="file-input-container">
              <input 
                type="file" 
                id="rccm" 
                (change)="onFileSelected($event, 'rccm')" 
                accept=".pdf,.jpg,.jpeg,.png"
                class="form-input">
              <button type="button" class="upload-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <div *ngIf="rccm?.invalid && rccm?.touched" class="error-text">
              <span *ngIf="rccm?.errors?.['required']">Le RCCM est requis</span>
            </div>
          </div>
        </div>

        <!-- Colonne droite -->
        <div class="form-column right-column">
          <div class="form-group">
            <label for="releve-bancaire">Relevé bancaire</label>
            <div class="file-input-container">
              <input 
                type="file" 
                id="releve-bancaire" 
                (change)="onFileSelected($event, 'bankStatement')" 
                accept=".pdf,.jpg,.jpeg,.png"
                class="form-input">
              <button type="button" class="upload-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M7 14L12 9L17 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <small class="optional-text">(facultatif)</small>
          </div>

          <div class="form-group">
            <label for="password">Créer un mot de passe</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              class="form-input"
              [class.error]="password?.invalid && password?.touched">
            <div *ngIf="password?.invalid && password?.touched" class="error-text">
              <span *ngIf="password?.errors?.['required']">Le mot de passe est requis</span>
              <span *ngIf="password?.errors?.['minlength']">Le mot de passe doit contenir au moins 8 caractères</span>
            </div>
          </div>

          <div class="form-group">
            <label for="confirm-password">Confirmer le mot de passe</label>
            <input 
              type="password" 
              id="confirm-password" 
              formControlName="confirmPassword" 
              class="form-input"
              [class.error]="confirmPassword?.invalid && confirmPassword?.touched">
            <div *ngIf="confirmPassword?.invalid && confirmPassword?.touched" class="error-text">
              <span *ngIf="confirmPassword?.errors?.['required']">La confirmation du mot de passe est requise</span>
              <span *ngIf="confirmPassword?.errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Boutons d'action -->
      <div class="form-actions">
        <button type="button" class="back-btn" (click)="goBack()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M12 19L5 12L12 5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button 
          type="submit" 
          class="submit-btn" 
          [disabled]="isLoading || registrationForm.invalid">
          <span *ngIf="!isLoading">S'enregistrer</span>
          <span *ngIf="isLoading">Inscription en cours...</span>
        </button>
      </div>
    </form>
  </div>
</div>