<section class="campaigns-section">
  <div class="section-header">
    <h2>Mes campagnes en cours</h2>
    <div class="header-actions">
      <button *ngIf="campaignStats" class="stats-btn" [style.color]="campaignStats.color">
        <i [class]="campaignStats.icon"></i>
        {{ campaignStats.value }} campagnes
      </button>
      <button class="see-all-btn green" (click)="goToCampaigns()">Voir Tout ></button>
    </div>
  </div>

  <!-- État de chargement -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Chargement des campagnes...</p>
    </div>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="errorMessage && !isLoading" class="error-message">
    <div class="error-content">
      <span>{{ errorMessage }}</span>
      <button (click)="clearError()" class="close-btn" title="Fermer">×</button>
    </div>
    <button (click)="refreshStats()" class="retry-btn">Réessayer</button>
  </div>
  
  <!-- Message quand aucune campagne -->
  <div *ngIf="!isLoading && !hasCampaigns && !errorMessage" class="no-campaigns">
    <div class="no-campaigns-content">
      <i class="fas fa-bullhorn"></i>
      <h3>Aucune campagne trouvée</h3>
      <p>Il n'y a actuellement aucune campagne à afficher.</p>
      <button (click)="goToCampaigns()" class="create-btn">
        <i class="fas fa-plus"></i>
        Créer une campagne
      </button>
    </div>
  </div>

  <!-- Grille des campagnes réelles -->
  <div class="campaigns-grid" *ngIf="!isLoading && hasCampaigns">
    <div class="campaign-card" *ngFor="let campaign of campaigns">
      <!-- En-tête avec titre et secteur -->
      <div class="card-header">
        <h3 class="campaign-title">{{ campaign.title }}</h3>
        <span class="sector-badge" [class]="campaign.sector.toLowerCase()">{{ campaign.sector }}</span>
      </div>
      
      <!-- Section principale avec fonds et progression -->
      <div class="card-main">
        <div class="funds-section">
          <div class="funds-info">
            <i [class]="campaign.type === 'Bénévolat' ? 'fas fa-hands-helping' : 'fas fa-coins'"></i>
            <span>{{ campaign.funds }}</span>
          </div>
        </div>
        
        <div class="progress-section">
          <div class="progress-header">
            <span class="progress-label">Progression</span>
            <span class="percentage">{{ campaign.progress }}%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="campaign.progress"></div>
          </div>
          <div class="collaborators">
            <i class="fas fa-users"></i>
            <span>{{ campaign.collaborators }}</span>
          </div>
        </div>
      </div>
      
      <!-- Description -->
      <div class="card-content">
        <p class="campaign-description">{{ campaign.campaignSummary || (campaign.campaignDescription ? (campaign.campaignDescription.length > 100 ? campaign.campaignDescription.substring(0, 100) + '...' : campaign.campaignDescription) : '') }}</p>
      </div>
      
      <!-- Pied de carte avec badges et actions -->
      <div class="card-footer">
        <div class="footer-top">
          <div class="status-badges">
            <div class="status-badge" [class]="campaign.status.toLowerCase().replace(' ', '-')">
              <i [class]="campaign.statusIcon"></i>
              <span>{{ campaign.status }}</span>
            </div>
            <div class="type-badge">
              <i [class]="campaign.typeIcon"></i>
              <span>{{ campaign.type }}</span>
            </div>
          </div>
          <div class="end-date">
            <i class="fas fa-calendar-alt"></i>
            <span>Fin: {{ campaign.endDate }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
