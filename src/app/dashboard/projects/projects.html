<section class="projects-section">
  <div class="section-header">
    <h2>Mes Projets actifs</h2>
    <div class="header-actions">
      <button *ngIf="projectStats" class="stats-btn" [style.color]="projectStats.color">
        <i [class]="projectStats.icon"></i>
        {{ projectStats.value }} projets
      </button>
      <button class="see-all-btn" (click)="goToProjects()">Voir Tout ></button>
    </div>
  </div>

  <!-- État de chargement -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Chargement des projets...</p>
    </div>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="errorMessage && !isLoading" class="error-message">
    <div class="error-content">
      <span>{{ errorMessage }}</span>
      <button (click)="clearError()" class="close-btn" title="Fermer">×</button>
    </div>
    <button (click)="refreshStats()" class="retry-btn">Réessayer</button>
  </div>
  
  <!-- Message quand aucun projet -->
  <div *ngIf="!isLoading && !hasProjects && !errorMessage" class="no-projects">
    <div class="no-projects-content">
      <i class="fas fa-folder-open"></i>
      <h3>Aucun projet trouvé</h3>
      <p>Il n'y a actuellement aucun projet à afficher.</p>
      <button (click)="goToProjects()" class="create-btn">
        <i class="fas fa-plus"></i>
        Créer un projet
      </button>
    </div>
  </div>

  <!-- Grille des projets réels -->
  <div class="projects-grid" *ngIf="!isLoading && hasProjects">
    <div class="project-card" *ngFor="let project of projects">
      <div class="card-header">
        <span class="amount">{{ project.funds }}</span>
        <span class="category-badge" [class]="project.sector.toLowerCase()">{{ project.sector }}</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="project.progress"></div>
      </div>
      <div class="card-content">
        <div class="collaborators">
          <i class="fas fa-users"></i>
          <span>{{ project.collaborators }}</span>
        </div>
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>
        <div class="dates">
          <span class="date">Créé: {{ project.creationDate }}</span>
          <span class="date">Statut: {{ project.status }}</span>
        </div>
      </div>
    </div>
  </div>
</section>
