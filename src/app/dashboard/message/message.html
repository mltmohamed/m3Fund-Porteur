<div class="message-container">
  <!-- Sidebar des conversations -->
  <div class="conversations-sidebar">
    <!-- Header avec recherche -->
    <div class="sidebar-header">
      <h2>Messages</h2>
      <div class="search-container">
        <input 
          type="text" 
          placeholder="Rechercher..." 
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
          class="search-input">
        <i class="fas fa-search search-icon"></i>
      </div>
    </div>

    <!-- Liste des conversations -->
    <div class="conversations-list">
      <div 
        *ngFor="let conversation of conversations" 
        class="conversation-item"
        [class.selected]="selectedConversation?.id === conversation.id"
        (click)="selectConversation(conversation)">
        
        <div class="conversation-avatar">
          <img [src]="conversation.sender.avatar" [alt]="conversation.sender.name">
        </div>
        
        <div class="conversation-content">
          <div class="conversation-header">
            <h3 class="conversation-title">{{ conversation.title }}</h3>
            <span class="conversation-time">{{ conversation.timestamp }}</span>
          </div>
          
          <div class="conversation-sender">
            <span class="sender-name">{{ conversation.sender.name }}</span>
            <span class="sender-role">{{ conversation.sender.role }}</span>
          </div>
          
          <p class="conversation-snippet">{{ conversation.snippet }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Zone de chat -->
  <div class="chat-area">
    <div *ngIf="!selectedConversation" class="no-conversation">
      <div class="no-conversation-content">
        <i class="fas fa-comments"></i>
        <h3>Sélectionnez une conversation</h3>
        <p>Choisissez une conversation pour commencer à discuter</p>
      </div>
    </div>

    <div *ngIf="selectedConversation" class="chat-window">
      <!-- Header du chat -->
      <div class="chat-header">
        <div class="chat-user-info">
          <div class="chat-avatar">
            <img [src]="selectedConversation.sender.avatar" [alt]="selectedConversation.sender.name">
          </div>
          <div class="chat-user-details">
            <h3>{{ selectedConversation.title }}</h3>
            <p>{{ selectedConversation.sender.name }} • {{ selectedConversation.sender.role }}</p>
          </div>
        </div>
        <div class="chat-actions">
          <button class="action-btn">
            <i class="fas fa-phone"></i>
          </button>
          <button class="action-btn">
            <i class="fas fa-video"></i>
          </button>
          <button class="action-btn">
            <i class="fas fa-ellipsis-v"></i>
          </button>
        </div>
      </div>

      <!-- Messages -->
      <div class="messages-container">
        <div *ngFor="let message of messages" class="message" [class.incoming]="message.isIncoming">
          <div class="message-content">
            <p>{{ message.content }}</p>
            <span class="message-time">{{ message.timestamp }}</span>
          </div>
        </div>
      </div>

      <!-- Zone de saisie -->
      <div class="message-input-area">
        <div class="input-container">
          <button class="attach-btn">
            <i class="fas fa-paperclip"></i>
          </button>
          <input 
            type="text" 
            placeholder="Tapez votre message..."
            [(ngModel)]="newMessage"
            (keypress)="onKeyPress($event)"
            class="message-input">
          <button class="send-btn" (click)="sendMessage()">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>